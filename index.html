
<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport"
		content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<title>Hello WebXR</title>

	<!-- three.js -->
	<script src="https://unpkg.com/three@0.126.0/build/three.js"></script>
</head>

<body>
	<!-- Starting an immersive WebXR session requires user interaction.
	We start this one with a simple button. -->

	<button onclick="activateXR()">Start App</button>

	<script>
		async function activateXR() {
			// Add a canvas element and initialize a WebGL context that is compactible with WebXR.
			const canvas = document.createElement("canvas");
			document.body.appendChild(canvas);
			const gl = canvas.getContext("webgl", { xrCompactible: true });

			// To be continued
			const scene = new THREE.Scene();

			// The cube will have a different color on each side.
			const materials = [
				new THREE.MeshBasicMaterial({color: 0xff0000}),
				new THREE.MeshBasicMaterial({color: 0x0000ff}),
				new THREE.MeshBasicMaterial({color: 0x00ff00}),
				new THREE.MeshBasicMaterial({color: 0xff00ff}),
				new THREE.MeshBasicMaterial({color: 0x00ffff}),
				new THREE.MeshBasicMaterial({color: 0xffff00}),
			];

			// Create the cube and add it to the demo scene
			const cube = new THREE.Mesh(new THREE.BoxBufferGeometry(.2f,.2f,.2f), materials);
			cube.position.set(1, 1, 1);
			scene.add(cube);

			const renderer = new THREE.WebGLRenderer({
				alpha: true,
				preserveDrawingBuffer: true,
				canvas: canvas,
				context: gl,
			});
			renderer.autoClear = false;

			// The API directly updates the camera matrices
			// Disable matrix auto updates so three.js doesn't attempt
			// to handle the matrices independently.
			const camera = new THREE.PerspectiveCamera();
			camera.matrixAutoUpdate = false;
		}
	</script>
</body>

</html>